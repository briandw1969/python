from tkinter import *
import sqlite3



root = Tk()
root.title("Home Page")
root.geometry("400x400")

def update():
    conn = sqlite3.connect("dbname.db")
    cur = conn.cursor()
    
    record_id = select_edit.get()
    cur.execute("""UPDATE inventory SET
                item = :item,
                price = :price,
                amount = :amount
                
                WHERE oid = :oid""",
                {
                    'item': item.get(),
                    'price': price.get(),
                    'amount': amount.get(),
                    'oid': record_id
                })
    
    
    conn.commit
    cur.close()
    
    root.destroy
    
    # #clear text boxes
    # item_name.delete(0, END)
    # price_name.delete(0, END)
    # amount_name.delete(0, END)

def load():

    conn = sqlite3.connect("dbname.db")
    cur = conn.cursor()
    
    record_id = select_edit.get()
    cur.execute("SELECT * FROM inventory WHERE oid = " + record_id)
    records = cur.fetchall()
    
    for record in records:
        item.insert(0, record[0])
        price.insert(0, record[1])
        amount.insert(0, record[2])
        
    conn.commit
    cur.close()
    
global item
global price
global amount    
    
    
#text boxes
item = Entry(root, width=30)
item.grid(row=0, column=1, padx=20)
price = Entry(root, width=30)
price.grid(row=1, column=1, padx=20)
amount = Entry(root, width=30)
amount.grid(row=2, column=1, padx=20)
select_edit = Entry(root, width=30)
select_edit.grid(row=3, column=1, padx=20)

#labels
item_label = Label(root, text="Item Name")
item_label.grid(row=0, column=0)
price_label = Label(root, text="Price")
price_label.grid(row=1, column=0)
amount_label = Label(root, text="Amount")
amount_label.grid(row=2, column=0)
select_label = Label(root, text="Select ID")
select_label.grid(row=3, column=0)


#query button
select_button=Button(root, text="Select Inventory", command=load)
select_button.grid(row=4, column=0,columnspan=2, pady=10, padx=10, ipadx=137)
update_button=Button(root, text="Update Inventory", command=update)
update_button.grid(row=5, column=0,columnspan=2, pady=10, padx=10, ipadx=137)
btnclose = Button(root, text="Close Window", command=root.destroy)
btnclose.grid(row=6, column=0, columnspan=2)

mainloop()
